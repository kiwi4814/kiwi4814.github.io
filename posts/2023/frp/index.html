<!doctype html><html lang=zh-CN><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><meta charset=UTF-8><meta name=generator content="Hugo 0.127.0"><meta name=theme-color content="#16171d"><meta name=color-scheme content="light dark"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no, date=no, address=no, email=no"><meta http-equiv=Cache-Control content="no-transform"><meta http-equiv=Cache-Control content="no-siteapp"><title>VPS + FRP 实现内网穿透及域名反向代理 | 客驿风尘面，花坐墨痕枝</title>
<link rel=stylesheet href=/css/meme.min.7a91760de7f7f3a6b5cfef8f62479b366cb9d045025cf806386e0ef96e9ce411.css><script src=/js/meme.min.827eb5b39ac7de19d599c17d9853dfa5160b1300abd592247b4735d5b043b472.js></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto+Serif+SC:wght@400;500;700&amp;family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" media=print onload='this.media="all"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto+Serif+SC:wght@400;500;700&amp;family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap"></noscript><meta name=author content="kiwi4814"><meta name=description content="最近入手了一个搬瓦工 CN2 GIA 服务器，目的之一是打算给家里的黑群晖做内网穿透用，稍微比较了……"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=mask-icon href=/icons/safari-pinned-tab.svg color=#2a6df4><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="客驿风尘面，花坐墨痕枝"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=mobile-web-app-capable content="yes"><meta name=application-name content="客驿风尘面，花坐墨痕枝"><meta name=msapplication-starturl content="../../../"><meta name=msapplication-TileColor content="#fff"><meta name=msapplication-TileImage content="../../../icons/mstile-150x150.png"><link rel=manifest href=/manifest.json><link rel=canonical href=https://kiwi4814.github.io/posts/2023/frp/><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2023-05-09T16:01:35+00:00","dateModified":"2025-02-12T02:51:23+00:00","url":"https://kiwi4814.github.io/posts/2023/frp/","headline":"VPS + FRP 实现内网穿透及域名反向代理","description":"最近入手了一个搬瓦工 CN2 GIA 服务器，目的之一是打算给家里的黑群晖做内网穿透用，稍微比较了……","inLanguage":"zh-CN","articleSection":"posts","wordCount":4371,"image":["https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317155233056.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317163306465.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317172328845.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317175234625.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317175712133.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317175621520.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317175523854.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317175507025.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317175541261.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317181102512.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319150117132.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319150555414.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319150728119.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319151311076.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319153604893.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319153807057.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319155046586.webp","https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319154737684.webp"],"author":{"@type":"Person","description":"工欲善其事，必先利其器。","email":"m4814@outlook.com","image":"https://kiwi4814.github.io/icons/apple-touch-icon.png","url":"https://kiwi4814.github.io/","name":"kiwi4814"},"license":"[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)","publisher":{"@type":"Organization","name":"客驿风尘面，花坐墨痕枝","logo":{"@type":"ImageObject","url":"https://kiwi4814.github.io/icons/apple-touch-icon.png"},"url":"https://kiwi4814.github.io/"},"mainEntityOfPage":{"@type":"WebSite","@id":"https://kiwi4814.github.io/"}}</script><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@kiwi4814"><meta property="og:title" content="VPS + FRP 实现内网穿透及域名反向代理"><meta property="og:description" content="最近入手了一个搬瓦工 CN2 GIA 服务器，目的之一是打算给家里的黑群晖做内网穿透用，稍微比较了……"><meta property="og:url" content="https://kiwi4814.github.io/posts/2023/frp/"><meta property="og:site_name" content="客驿风尘面，花坐墨痕枝"><meta property="og:locale" content="zh"><meta property="og:image" content="https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317155233056.webp"><meta property="og:type" content="article"><meta property="article:published_time" content="2023-05-09T16:01:35+00:00"><meta property="article:modified_time" content="2025-02-12T02:51:23+00:00"><meta property="article:section" content="posts"></head><body><div class=container><header class=header><div class=header-wrapper><div class="header-inner single"><div class=site-brand><a href=/ class=brand>客驿风尘面，花坐墨痕枝</a></div><nav class=nav><ul class=menu id=menu><li class="menu-item active"><a href=/posts/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon archive"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7.0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6.0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6.0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3.0 64v48c0 8.8 7.2 16 16 16h480c8.8.0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class=menu-item-name>文章</span></a></li><li class=menu-item><a href=/series/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon wpexplorer"><path d="M512 256c0 141.2-114.7 256-256 256C114.8 512 0 397.3.0 256S114.7.0 256 0s256 114.7 256 256zm-32 0c0-123.2-100.3-224-224-224C132.5 32 32 132.5 32 256s100.5 224 224 224 224-100.5 224-224zM160.9 124.6l86.9 37.1-37.1 86.9-86.9-37.1 37.1-86.9zm110 169.1 46.6 94h-14.6l-50-1e2-48.9 1e2h-14l51.1-106.9-22.3-9.4 6-14 68.6 29.1-6 14.3-16.5-7.1zm-11.8-116.3 68.6 29.4-29.4 68.3L230 246l29.1-68.6zm80.3 42.9 54.6 23.1-23.4 54.3-54.3-23.1 23.1-54.3z"/></svg><span class=menu-item-name>系列</span></a></li><li class=menu-item><a href=/tags/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="icon tags"><path d="M497.941 225.941 286.059 14.059A48 48 0 00252.118.0H48C21.49.0.0 21.49.0 48v204.118a48 48 0 0014.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882.0l204.118-204.118c18.745-18.745 18.745-49.137.0-67.882zM112 160c-26.51.0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882.0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397.0h48.721a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882z"/></svg><span class=menu-item-name>标签</span></a></li><li class=menu-item><a href=/categories/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon th"><path d="M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255.0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255.0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255.0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256.0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255.0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255.0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255.0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256.0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255.0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255.0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255.0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255.0-24 10.745-24 24zm386.667-56H488c13.255.0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255.0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255.0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255.0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255.0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255.0-24 10.745-24 24z"/></svg><span class=menu-item-name>归档</span></a></li><li class=menu-item><a id=theme-switcher href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5 242 7a18 18 0 0128 0l48.8 97.5L422.2 70A18 18 0 01442 89.8l-34.5 103.4L505 242a18 18 0 010 28l-97.5 48.8L442 422.2A18 18 0 01422.2 442l-103.4-34.5L270 505a18 18 0 01-28 0l-48.8-97.5L89.8 442A18 18 0 0170 422.2l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8L70 89.8A18 18 0 0189.8 70zM256 128a128 128 0 10.01.0M256 160a96 96 0 10.01.0"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412A256 256 0 10181 5a11.5 11.5.0 00-5 20A201.5 201.5.0 0142 399a11.5 11.5.0 00-15 13"/></svg></a></li></ul></nav></div></div><input type=checkbox id=nav-toggle aria-hidden=true>
<label for=nav-toggle class=nav-toggle></label>
<label for=nav-toggle class=nav-curtain></label></header><main class="main single" id=main><div class=main-inner><article class="content post h-entry" data-align=justify data-type=posts><h1 class="post-title p-name">VPS + FRP 实现内网穿透及域名反向代理</h1><nav class=contents><h2 id=contents class=contents-title>目录</h2><ol class=toc><li><a id=contents:一frp-介绍 href=#一frp-介绍>一、frp 介绍</a><ol><li><ol><li><a id=contents:为什么使用-frp- href=#为什么使用-frp->为什么使用 frp ？</a></li><li><a id=contents:原理 href=#原理>原理</a></li></ol></li></ol></li><li><a id=contents:二服务端frps安装 href=#二服务端frps安装>二、服务端（frps）安装</a><ol><li><a id=contents:frps-服务端一键配置脚本frp-最新版本0480 href=#frps-服务端一键配置脚本frp-最新版本0480>Frps 服务端一键配置脚本，Frp 最新版本：0.48.0</a><ol><li><a id=contents:install安装 href=#install安装>Install（安装）</a><ol><li><a id=contents:gitee href=#gitee>Gitee</a></li><li><a id=contents:github href=#github>Github</a></li></ol></li><li><a id=contents:uninstall卸载 href=#uninstall卸载>Uninstall（卸载）</a></li><li><a id=contents:update更新 href=#update更新>Update（更新）</a></li><li><a id=contents:server-management服务管理器 href=#server-management服务管理器>Server management（服务管理器）</a></li></ol></li></ol></li><li><a id=contents:三客户端frpc安装 href=#三客户端frpc安装>三、客户端（frpc）安装</a><ol><li><a id=contents:第一种-命令 href=#第一种-命令>第一种 命令</a></li><li><a id=contents:第二种-gui href=#第二种-gui>第二种 GUI</a></li><li><a id=contents:客户端参考配置 href=#客户端参考配置>客户端参考配置</a></li></ol></li><li><a id=contents:四域名配置 href=#四域名配置>四、域名配置</a></li><li><a id=contents:五nginx映射 href=#五nginx映射>五、Nginx映射</a></li><li><a id=contents:六群晖网盘 href=#六群晖网盘>六、群晖网盘</a></li><li><a id=contents:七总结 href=#七总结>七、总结</a></li></ol></nav><div class="post-body e-content"><p>最近入手了一个搬瓦工 CN2 GIA 服务器，目的之一是打算给家里的黑群晖做内网穿透用，稍微比较了下目前内网穿透的一些方案，最后决定使用 frp 来实现。此外，我在NameSilo上注册了一个域名</p><p><code>xxx.com</code>，最终想实现的效果是，当我访问 <code>dsm.xxx.com</code> 的时候自动跳转到群晖管理入口，而当我访问 <code>plex.xxx.com</code> 跳转到家庭影院系统，等等以此类推。</p><p>下面记录下安装的过程，仅供参考。</p><p><strong>VPS公网IP：111.22.33.44</strong></p><p><strong>VPS系统信息：CentOS Linux release 7.9.2009</strong></p><p><strong>群晖系统版本：DSM 6.2-23739</strong></p><p><strong>安装的 frp 版本：0.48.0</strong></p><h2 id=一frp-介绍><a href=#一frp-介绍 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:一frp-介绍 class=headings>一、frp 介绍</a></h2><p>frp 全称为 "Fast Reverse Proxy"，是一种可以将内网服务暴露到外网的工具。通常情况下，如果我们想要从外部访问内网中的服务（比如在公司网络访问家里的设备），需要将内网中的设备（比如路由器）进行端口映射，让外网的请求能够被正确转发到内网中的对应设备上。但是这样做存在一些问题，比如安全性较差、配置复杂等。</p><p>而 frp 则提供了一种更加便捷、安全的方法。它可以将内网中的服务通过一个代理服务器暴露到外网，而无需进行端口映射。具体来说，frp 会在内网设备上运行一个客户端程序，将内网服务的请求发送给代理服务器，代理服务器再将请求转发给外网的访问者。这样就能够实现外网访问内网服务的目的。</p><p>frp 还具有一些其他的功能，比如支持 TCP/UDP 流量转发、支持多种协议等。它的配置相对简单，且性能较为优秀，因此被广泛应用于内网穿透、反向代理等场景中。</p><p>以下是官网对于 frp 的更为专业的介绍：</p><blockquote><p>frp 是一个专注于内网穿透的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。</p><h4 id=为什么使用-frp-><a href=#为什么使用-frp- class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:为什么使用-frp- class=headings>为什么使用 frp ？</a></h4><p>通过在具有公网 IP 的节点上部署 frp 服务端，可以轻松地将内网服务穿透到公网，同时提供诸多专业的功能特性，这包括：</p><ul><li>客户端服务端通信支持 TCP、KCP 以及 Websocket 等多种协议。</li><li>采用 TCP 连接流式复用，在单个连接间承载更多请求，节省连接建立时间。</li><li>代理组间的负载均衡。</li><li>端口复用，多个服务通过同一个服务端端口暴露。</li><li>多个原生支持的客户端插件（静态文件查看，HTTP、SOCK5 代理等），便于独立使用 frp 客户端完成某些工作。</li><li>高度扩展性的服务端插件系统，方便结合自身需求进行功能扩展。</li><li>服务端和客户端 UI 页面。</li></ul><h4 id=原理><a href=#原理 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:原理 class=headings>原理</a></h4><p>frp 主要由 <strong>客户端 (frpc)</strong> 和 <strong>服务端 (frps)</strong> 组成，服务端通常部署在具有公网 IP 的机器上，客户端通常部署在需要穿透的内网服务所在的机器上。</p><p>内网服务由于没有公网 IP，不能被非局域网内的其他用户访问。</p><p>用户通过访问服务端的 frps，由 frp 负责根据请求的端口或其他信息将请求路由到对应的内网机器，从而实现通信。</p></blockquote><p>接下来我们将分别在具有公网IP的服务器上和内网NAS设备上安装 frp 的服务端和客户端，以实现外网和内网机器（本文中就是NAS）的通信。</p><h2 id=二服务端frps安装><a href=#二服务端frps安装 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:二服务端frps安装 class=headings>二、服务端（frps）安装</a></h2><p><font color=red>【注意】：在本节中安装 frps 的时候使用了 frp 默认的80端口，这里建议改为其他端口号，因为Nginx默认也会使用80端口，启动过程中会与 frp 冲突。</font></p><p>关于如何安装和使用示例 <a href=https://gofrp.org/docs/ target=_blank rel=noopener>frp官方中文文档</a> 有比较详细的介绍了，此外官网还有很多不同场景下的使用方法，本文主要是入门使用，故对更加深入的使用方法感兴趣的可以自行跳转研究。</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317155233056.webp alt=image-20230317155233056 style=zoom:50%><p>此外，想要省事一点的可以直接使用<a href=https://github.com/MvsCode/frps-onekey target=_blank rel=noopener>一键安装脚本</a>来进行安装，以下内容引用自安装脚本主页的介绍，感谢原作者的无私奉献。</p><blockquote><h3 id=frps-服务端一键配置脚本frp-最新版本0480><a href=#frps-服务端一键配置脚本frp-最新版本0480 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:frps-服务端一键配置脚本frp-最新版本0480 class=headings>Frps 服务端一键配置脚本，Frp 最新版本：0.48.0</a></h3><p><em>Frp 是一个高性能的反向代理应用，可以帮助您轻松地进行内网穿透，对外网提供服务，支持 tcp, http, https 等协议类型，并且 web 服务支持根据域名进行路由转发。</em></p><ul><li>详情：fatedier (<a href=https://github.com/fatedier/frp target=_blank rel=noopener>https://github.com/fatedier/frp</a>)</li><li>此脚本原作者：clangcn (<a href=https://github.com/clangcn/onekey-install-shell target=_blank rel=noopener>https://github.com/clangcn/onekey-install-shell</a>)</li></ul><h4 id=install安装><a href=#install安装 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:install安装 class=headings>Install（安装）</a></h4><h5 id=gitee><a href=#gitee class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:gitee class=headings>Gitee</a></h5><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget https://gitee.com/mvscode/frps-onekey/raw/master/install-frps.sh -O ./install-frps.sh
</span></span><span class=line><span class=cl>chmod <span class=m>700</span> ./install-frps.sh
</span></span><span class=line><span class=cl>./install-frps.sh install
</span></span></code></pre></td></tr></table></div></div></div><h5 id=github><a href=#github class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:github class=headings>Github</a></h5><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget https://raw.githubusercontent.com/MvsCode/frps-onekey/master/install-frps.sh -O ./install-frps.sh
</span></span><span class=line><span class=cl>chmod <span class=m>700</span> ./install-frps.sh
</span></span><span class=line><span class=cl>./install-frps.sh install
</span></span></code></pre></td></tr></table></div></div></div><h4 id=uninstall卸载><a href=#uninstall卸载 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:uninstall卸载 class=headings>Uninstall（卸载）</a></h4><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./install-frps.sh uninstall
</span></span></code></pre></td></tr></table></div></div></div><h4 id=update更新><a href=#update更新 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:update更新 class=headings>Update（更新）</a></h4><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./install-frps.sh update
</span></span></code></pre></td></tr></table></div></div></div><h4 id=server-management服务管理器><a href=#server-management服务管理器 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:server-management服务管理器 class=headings>Server management（服务管理器）</a></h4><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Usage: /etc/init.d/frps <span class=o>{</span>start<span class=p>|</span>stop<span class=p>|</span>restart<span class=p>|</span>status<span class=p>|</span>config<span class=p>|</span>version<span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div></div></blockquote><p>安装过程中，根据提示输入或选择自己想要配置的值即可。</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317163306465.webp alt=image-20230317163306465 style=zoom:50%><p>另外，这里选择的接口需要在防火墙中放开（centos7 使用 firewalld 管理防火墙）,防火墙相关的命令参考如下：</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 查看防火墙状态</span>
</span></span><span class=line><span class=cl>sudo systemctl status firewalld
</span></span><span class=line><span class=cl><span class=c1># 开启防火墙</span>
</span></span><span class=line><span class=cl>sudo systemctl start firewalld
</span></span><span class=line><span class=cl><span class=c1># 临时关闭防火墙</span>
</span></span><span class=line><span class=cl>sudo systemctl stop firewalld
</span></span><span class=line><span class=cl><span class=c1># 永久关闭防火墙</span>
</span></span><span class=line><span class=cl>sudo systemctl disable firewalld
</span></span><span class=line><span class=cl><span class=c1># 开放指定端口</span>
</span></span><span class=line><span class=cl>sudo firewall-cmd --zone<span class=o>=</span>public --add-port<span class=o>=</span>82/tcp --permanent
</span></span><span class=line><span class=cl><span class=c1># 重载配置</span>
</span></span><span class=line><span class=cl>sudo firewall-cmd --reload
</span></span><span class=line><span class=cl><span class=c1># 查看当前开放的端口及服务</span>
</span></span><span class=line><span class=cl>sudo firewall-cmd --list-ports
</span></span></code></pre></td></tr></table></div></div></div><p>此外，如果你使用的是国内运营商的服务器或者安装了iptables，还需要在防火墙管理页面允许对应的端口通过：</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317172328845.webp alt=image-20230317172328845 style=zoom:50%><p>最终生成的配置文件如下：（路径在 <code>/usr/local/frps/frps.ini</code> ）</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=c1># [common] is integral section</span>
</span></span><span class=line><span class=cl><span class=k>[common]</span>
</span></span><span class=line><span class=cl><span class=c1># A literal address or host name for IPv6 must be enclosed</span>
</span></span><span class=line><span class=cl><span class=c1># in square brackets, as in &#34;[::1]:80&#34;, &#34;[ipv6-host]:http&#34; or &#34;[ipv6-host%zone]:80&#34;</span>
</span></span><span class=line><span class=cl><span class=na>bind_addr</span> <span class=o>=</span> <span class=s>0.0.0.0</span>
</span></span><span class=line><span class=cl><span class=na>bind_port</span> <span class=o>=</span> <span class=s>5443</span>
</span></span><span class=line><span class=cl><span class=c1># udp port used for kcp protocol, it can be same with &#39;bind_port&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># if not set, kcp is disabled in frps</span>
</span></span><span class=line><span class=cl><span class=na>kcp_bind_port</span> <span class=o>=</span> <span class=s>5443</span>
</span></span><span class=line><span class=cl><span class=c1># if you want to configure or reload frps by dashboard, dashboard_port must be set</span>
</span></span><span class=line><span class=cl><span class=na>dashboard_port</span> <span class=o>=</span> <span class=s>6443</span>
</span></span><span class=line><span class=cl><span class=c1># dashboard assets directory(only for debug mode)</span>
</span></span><span class=line><span class=cl><span class=na>dashboard_user</span> <span class=o>=</span> <span class=s>admin</span>
</span></span><span class=line><span class=cl><span class=na>dashboard_pwd</span> <span class=o>=</span> <span class=s>6pH3CLS6</span>
</span></span><span class=line><span class=cl><span class=c1># assets_dir = ./static</span>
</span></span><span class=line><span class=cl><span class=na>vhost_http_port</span> <span class=o>=</span> <span class=s>82</span>
</span></span><span class=line><span class=cl><span class=na>vhost_https_port</span> <span class=o>=</span> <span class=s>443</span>
</span></span><span class=line><span class=cl><span class=c1># console or real logFile path like ./frps.log</span>
</span></span><span class=line><span class=cl><span class=na>log_file</span> <span class=o>=</span> <span class=s>./frps.log</span>
</span></span><span class=line><span class=cl><span class=c1># debug, info, warn, error</span>
</span></span><span class=line><span class=cl><span class=na>log_level</span> <span class=o>=</span> <span class=s>info</span>
</span></span><span class=line><span class=cl><span class=na>log_max_days</span> <span class=o>=</span> <span class=s>3</span>
</span></span><span class=line><span class=cl><span class=c1># auth token</span>
</span></span><span class=line><span class=cl><span class=na>token</span> <span class=o>=</span> <span class=s>EA6QYpVmefiBsPRe</span>
</span></span><span class=line><span class=cl><span class=c1># It is convenient to use subdomain configure for http、https type when many people use one frps server together.</span>
</span></span><span class=line><span class=cl><span class=na>subdomain_host</span> <span class=o>=</span> <span class=s>111.22.33.44</span>
</span></span><span class=line><span class=cl><span class=c1># only allow frpc to bind ports you list, if you set nothing, there won&#39;t be any limit</span>
</span></span><span class=line><span class=cl><span class=c1>#allow_ports = 1-65535</span>
</span></span><span class=line><span class=cl><span class=c1># pool_count in each proxy will change to max_pool_count if they exceed the maximum value</span>
</span></span><span class=line><span class=cl><span class=na>max_pool_count</span> <span class=o>=</span> <span class=s>50</span>
</span></span><span class=line><span class=cl><span class=c1># if tcp stream multiplexing is used, default is true</span>
</span></span><span class=line><span class=cl><span class=na>tcp_mux</span> <span class=o>=</span> <span class=s>true</span>
</span></span></code></pre></td></tr></table></div></div></div><p>安装完成后，启动</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>frps start
</span></span></code></pre></td></tr></table></div></div></div><p>启动成功后即可在浏览器中直接访问 http://111.22.33.44:6443 来打开管理界面。</p><h2 id=三客户端frpc安装><a href=#三客户端frpc安装 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:三客户端frpc安装 class=headings>三、客户端（frpc）安装</a></h2><p>首先要说明的一点是，这里的客户端其实可以是所有你需要穿透出去的设备，比如家里的主机、服务器等等，另外各个系统安装的方式可能会有所差异，比如在Mac电脑下可以很方便使用HomeBrew安装： <code>brew install frpc</code>，这里以群晖NAS系统下的Docker环境来演示安装方法，其他平台使用Docker也可以照此方式安装。</p><p>这里演示两种安装方法，第一种是命令式安装，群晖的话需要开启 ssh root 后，进入到后台安装，如何开启可以看前面的文章，第二种是直接在群晖的Docker软件可视化界面上操作，Docker镜像用的是snowdreamtech 大神封装的 <a href=https://hub.docker.com/r/snowdreamtech/frpc target=_blank rel=noopener>docker镜像</a> 。</p><h3 id=第一种-命令><a href=#第一种-命令 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:第一种-命令 class=headings>第一种 命令</a></h3><p>按照下面的步骤操作即可：</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 创建配置文件</span>
</span></span><span class=line><span class=cl>sudo mkdir -p /etc/frp <span class=o>&amp;&amp;</span> sudo touch /etc/frp/frpc.ini
</span></span><span class=line><span class=cl><span class=c1># 2. 编辑配置文件（配置文件示例见本节末尾）</span>
</span></span><span class=line><span class=cl>vi /etc/frp/frpc.ini
</span></span><span class=line><span class=cl><span class=c1># 3. 拉取镜像</span>
</span></span><span class=line><span class=cl>docker pull snowdreamtech/frpc
</span></span><span class=line><span class=cl><span class=c1># 4. 运行</span>
</span></span><span class=line><span class=cl>docker run  --network host -d -v /etc/frp/frpc.ini:/etc/frp/frpc.ini --name frpc snowdreamtech/frpc
</span></span></code></pre></td></tr></table></div></div></div><p>在启动完成后，我们可以使用Docker的相关命令查看日志和管理：</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=c># 查看启动日志</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>docker logs frpc<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># 启动</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>docker start frpc<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># 停止</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>docker stop frpc<span class=err>
</span></span></span></code></pre></td></tr></table></div></div></div><h3 id=第二种-gui><a href=#第二种-gui class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:第二种-gui class=headings>第二种 GUI</a></h3><p>在NAS下推荐使用此种方式，比较简单也方便统一管理，当然其实使用第一种方式这里也能展示出来，只是配置文件的位置不同罢了。</p><p>（1）打开 <code>filestation</code> ，创建或者上传配置文件 <code>frpc.ini</code> , 配置文件的内容和配置项参见本节末尾。</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317175234625.webp alt=image-20230317175234625 style=zoom:50%><p>（2）打开 <code>Docker套件</code>， 在注册表中搜索frpc，选择第一个 <code>snowdreamtech/frpc</code> 双击选择 latest 并下载</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317175712133.webp alt=image-20230317175712133 style=zoom:50%><p>（3）在 映像 中双击刚才下载的<code>snowdreamtech/frpc:lastest</code> 并双击，开始创建容器，并打开高级设置</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317175621520.webp alt=image-20230317175621520 style=zoom:50%><p>（4）高级配置按照下面的步骤操作即可，要点：自启动、映射配置文件、使用与 Docker Host 相同的网络</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317175523854.webp alt=image-20230317175523854 style=zoom:50%>
<img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317175507025.webp alt=image-20230317175507025 style=zoom:50%>
<img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317175541261.webp alt=image-20230317175541261 style=zoom:50%><p>（5）应用后就会自动运行 frpc</p><h3 id=客户端参考配置><a href=#客户端参考配置 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:客户端参考配置 class=headings>客户端参考配置</a></h3><p>下面的截图中列出了客户端配置及含义：</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230317181102512.webp alt=image-20230317181102512 style=zoom:50%><p>完整的配置如下：</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[common]</span>
</span></span><span class=line><span class=cl><span class=na>server_addr</span> <span class=o>=</span> <span class=s>111.22.33.44</span>
</span></span><span class=line><span class=cl><span class=na>server_port</span> <span class=o>=</span> <span class=s>5443</span>
</span></span><span class=line><span class=cl><span class=na>token</span> <span class=o>=</span> <span class=s>EA6QYpVmefiBsPRe</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[80]</span>
</span></span><span class=line><span class=cl><span class=na>type</span> <span class=o>=</span> <span class=s>tcp</span>
</span></span><span class=line><span class=cl><span class=na>local_ip</span> <span class=o>=</span> <span class=s>192.168.50.100</span>
</span></span><span class=line><span class=cl><span class=na>local_port</span> <span class=o>=</span> <span class=s>80</span>
</span></span><span class=line><span class=cl><span class=na>remote_port</span> <span class=o>=</span> <span class=s>82</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[dsm]</span>
</span></span><span class=line><span class=cl><span class=na>type</span> <span class=o>=</span> <span class=s>tcp</span>
</span></span><span class=line><span class=cl><span class=na>local_ip</span> <span class=o>=</span> <span class=s>192.168.50.100</span>
</span></span><span class=line><span class=cl><span class=na>local_port</span> <span class=o>=</span> <span class=s>5000</span>
</span></span><span class=line><span class=cl><span class=na>remote_port</span> <span class=o>=</span> <span class=s>5000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[drive_web]</span>
</span></span><span class=line><span class=cl><span class=na>type</span> <span class=o>=</span> <span class=s>tcp</span>
</span></span><span class=line><span class=cl><span class=na>local_ip</span> <span class=o>=</span> <span class=s>192.168.50.100</span>
</span></span><span class=line><span class=cl><span class=na>local_port</span> <span class=o>=</span> <span class=s>6690</span>
</span></span><span class=line><span class=cl><span class=na>remote_port</span> <span class=o>=</span> <span class=s>6690</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[plex]</span>
</span></span><span class=line><span class=cl><span class=na>type</span> <span class=o>=</span> <span class=s>tcp</span>
</span></span><span class=line><span class=cl><span class=na>local_ip</span> <span class=o>=</span> <span class=s>192.168.50.100</span>
</span></span><span class=line><span class=cl><span class=na>local_port</span> <span class=o>=</span> <span class=s>32400</span>
</span></span><span class=line><span class=cl><span class=na>remote_port</span> <span class=o>=</span> <span class=s>32400</span>
</span></span></code></pre></td></tr></table></div></div></div><p>启动成功后，如果客户端配置正确，且服务端和客户端之间的网络连接畅通，我们就可以通过 http://111.22.33.44:5000/ 来访问群晖的管理页面了，其他服务的地址以此类推即可。</p><p>但是这样的地址，首先我们可能根本记不住自己的服务器IP，也搞不清楚这么多域名映射关系，所以最好的方法是，我们把这几个地址反代成一个个方便的二级域名，就像文章开头说的那样，当我访问 <a href=http://dsm.xxx.com/ target=_blank rel=noopener>http://dsm.xxx.com/</a> 的时候，就能跳转到 http://111.22.33.44:5000/ 了，这样的映射，实现方法又很多，下面记录一下我自己的实现方式，仅供参考。</p><h2 id=四域名配置><a href=#四域名配置 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:四域名配置 class=headings>四、域名配置</a></h2><p>首先我们要去注册一个域名，提供商有很多，腾讯云、阿里云、GoDaddy、Namecheap、Namesilo等等，我是在Namesilo上注册的域名，在购买域名的时候要注意初次购买价格和续费价格，有的域名第一年很便宜，但是续费很贵，最好买续费价格不变的，然后域名的后缀可以选冷门一点的 xyz、club、top等等。</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319150117132.webp alt=image-20230319150117132 style=zoom:50%><p>注册完成后我们访问 <a href=https://www.namesilo.com/account_home.php target=_blank rel=noopener>个人账户管理主页</a>，然后点击右上角 Manage My Domains ,打开域名的管理界面。</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319150555414.webp alt=image-20230319150555414 style=zoom:50%>
<img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319150728119.webp alt=image-20230319150728119 style=zoom:50%><p>按照下图中的方式增加A记录：</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319151311076.webp alt=image-20230319151311076 style=zoom:50%><p>域名相关的设置就到这里，至于具体配置的含义和原理，笔者本身也是一知半解，就不做展开了。</p><p>接下来我们回到VPS服务器，使用Nginx来反向代理我们的应用。</p><h2 id=五nginx映射><a href=#五nginx映射 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:五nginx映射 class=headings>五、Nginx映射</a></h2><p>这里 Nginx 的安装位置与第二节相同，在VPS上服务器上安装，由于官方 yum 包是没有 Nginx 的，所以我们需要先安装三方软件源 —— EPEL-RELEASE。</p><p>安装：</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo yum install epel-release
</span></span><span class=line><span class=cl>sudo yum install nginx
</span></span></code></pre></td></tr></table></div></div></div><p>启动并确认启动状态：</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 启动</span>
</span></span><span class=line><span class=cl>sudo systemctl start nginx
</span></span><span class=line><span class=cl><span class=c1># 查看启动状态，显示为 active（running）的时候则代表启动成功了</span>
</span></span><span class=line><span class=cl>sudo systemctl status nginx
</span></span></code></pre></td></tr></table></div></div></div><p>然后，我们来编辑配置文件 <code>vim /etc/nginx/nginx.conf</code>（默认的位置）：</p><p>找到server的位置：</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319153604893.webp alt=image-20230319153604893 style=zoom:50%><p>将其替换为我们需要映射的域名和服务，其他的服务继续在底下增加新的server配置即可。</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319153807057.webp alt=image-20230319153807057 style=zoom:50%><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl>    <span class=c1>## 群晖控制面板</span>
</span></span><span class=line><span class=cl>    <span class=na>server {</span>
</span></span><span class=line><span class=cl>        <span class=na>listen 80;</span>
</span></span><span class=line><span class=cl>        <span class=na>server_name dsm.xxx.com;</span>
</span></span><span class=line><span class=cl>        <span class=na>root /usr/share/nginx/html;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=na>include /etc/nginx/default.d/*.conf;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=na>error_page 404 /404.html;</span>
</span></span><span class=line><span class=cl>        <span class=na>location</span> <span class=o>=</span> <span class=s>/404.html {
</span></span></span><span class=line><span class=cl><span class=s>        }</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=na>error_page 500 502 503 504 /50x.html;</span>
</span></span><span class=line><span class=cl>        <span class=na>location</span> <span class=o>=</span> <span class=s>/50x.html {
</span></span></span><span class=line><span class=cl><span class=s>        }</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=na>location / {</span>
</span></span><span class=line><span class=cl>            <span class=na>proxy_pass http://111.22.33.44:5000/;</span>
</span></span><span class=line><span class=cl>            <span class=na>proxy_set_header Host $host;</span>
</span></span><span class=line><span class=cl>            <span class=na>proxy_set_header X-Real-IP $remote_addr;</span>
</span></span><span class=line><span class=cl>            <span class=na>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
</span></span><span class=line><span class=cl>        <span class=na>}</span>
</span></span><span class=line><span class=cl>    <span class=na>}</span>
</span></span></code></pre></td></tr></table></div></div></div><p>然后重新载入nginx配置使其生效：</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>nginx</span> <span class=s>-s</span> <span class=s>reload</span>
</span></span></code></pre></td></tr></table></div></div></div><p>稍等一会，我们就可以在浏览器中通过 <a href=http://drive.xxx.com/ target=_blank rel=noopener>http://drive.xxx.com/</a> 来访问到我们的群晖管理界面了。</p><h2 id=六群晖网盘><a href=#六群晖网盘 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:六群晖网盘 class=headings>六、群晖网盘</a></h2><p>最后，简单介绍下群晖网盘的同步，首选我们在群晖的控制面板中去开启群晖Drive的web管理：</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319155046586.webp alt=image-20230319155046586 style=zoom:50%><p>然后需要注意的是 frp 中映射的端口为 6690 （PC端）而不是上图中的 7006，然后在群晖初始化连接的时候，可以直接填域名或者IP，这是由于群晖的默认设置造成的。这里的默认设置端口是指，<strong>NAS 端的 Drive 服务对 PC 端 Drive 程序开放的默认访问端口为 6690，对移动端的 App 开放的默认访问端口为 5000</strong>。此外，Drive 客户端程序在你输入域名后，会检测你输入的域名是不是带有端口号，如果没有填写端口号，客户端程序会自动添加上默认的访问端口去访问 NAS 端的 Drive，PC 端就自动添加 6690，移动端就自动添加 5000。但如果你自己填写了端口号，就会使用你填写的端口号去访问 NAS 端的 Drive。所以在局域网中直接输入群晖的 IP，加不加 6690 端口都能连接上 Drive 服务，但在外网下就需要用一个端口转发到群晖所在 IP 的 6690 端口。</p><img src=https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com/img/image-20230319154737684.webp alt=image-20230319154737684 style=zoom:50%><h2 id=七总结><a href=#七总结 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href=#contents:七总结 class=headings>七、总结</a></h2><p>本文简要介绍了如何使用一台VPS，在外网服务器和家里的NAS服务器分别安装 frp 进行通信并且绑定到指定的二级域名的过程。但是经过实际的测试，由于这种方式所有的流量都要依赖于这个第三方服务器，所以网速势必不会太理想，尤其是晚高峰时期，但是优势在于任何时候都可以直接访问到我们的内网服务而没有设备上的限制。由于笔者本人需要进行内网穿透访问家中设备的场景有限并且设备也很固定，所以下一篇文章中我们将使用另一种方式来实现稳定高速的内网穿透。</p></div><ul class=post-copyright><li class="copyright-item author"><span class=copyright-item-text>作者</span>：<a href=https://kiwi4814.github.io/ class="p-author h-card" target=_blank rel=noopener>kiwi4814</a></li><li class="copyright-item link"><span class=copyright-item-text>链接</span>：<a href=/posts/2023/frp/ target=_blank rel=noopener>https://kiwi4814.github.io/posts/2023/frp/</a></li><li class="copyright-item license"><span class=copyright-item-text>许可</span>：<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener>CC BY-NC-SA 4.0</a></li></ul></article><div class=updated-badge-container><span title="Updated @ 2025-02-12 02:51:23 UTC" style=cursor:help><svg xmlns="http://www.w3.org/2000/svg" width="130" height="20" class="updated-badge"><linearGradient id="b" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="a"><rect width="130" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#a)"><path class="updated-badge-left" d="M0 0h55v20H0z"/><path class="updated-badge-right" d="M55 0h75v20H55z"/><path fill="url(#b)" d="M0 0h130v20H0z"/></g><g fill="#fff" text-anchor="middle" font-size="110"><text x="285" y="150" fill="#010101" fill-opacity=".3" textLength="450" transform="scale(.1)">updated</text><text x="285" y="140" textLength="450" transform="scale(.1)">updated</text><text x="915" y="150" fill="#010101" fill-opacity=".3" textLength="650" transform="scale(.1)">2025-02-12</text><text x="915" y="140" textLength="650" transform="scale(.1)">2025-02-12</text></g></svg></span></div><div class=post-tags><a href=/tags/2024/07/%E6%8A%80%E6%9C%AF/ rel=tag class=post-tags-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>技术</a>
<a href=/tags/2023/05/nas/ rel=tag class=post-tags-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>NAS</a></div><ul class=post-nav><li class=post-nav-prev><a href=/posts/2023/zerotier/ rel=prev>&lt; 使用ZeroTier实现内网穿透教程</a></li><li class=post-nav-next><a href=/posts/2023/mac-iterm2/ rel=next>Mac环境搭建之iTerm2折腾之路 ></a></li></ul><div class=load-comments><div id=load-comments>加载评论</div></div></div></main><div id=back-to-top class=back-to-top><a href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6.0-33.9L207 39c9.4-9.4 24.6-9.4 33.9.0l194.3 194.3c9.4 9.4 9.4 24.6.0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3.0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a></div><footer id=footer class=footer><div class=footer-inner><div class=site-info>©&nbsp;2020–2025&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3.0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;kiwi4814</div><div class=site-copyright><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener>CC BY-NC-SA 4.0</a></div><ul class=socials><li class=socials-item><a href=/rss.xml target=_blank rel="external noopener" title=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M19.199 24C19.199 13.467 10.533 4.8.0 4.8V0c13.165.0 24 10.835 24 24h-4.801zM3.291 17.415c1.814.0 3.293 1.479 3.293 3.295.0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526.0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727.0 15.909 7.184 15.909 15.91z"/></svg></a></li><li class=socials-item><a href=mailto:m4814@qq.com target=_blank rel="external noopener" title=Email><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon social-icon"><path d="M464 64H48C21.49 64 0 85.49.0 112v288c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 4e2V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V4e2H48z"/></svg></a></li><li class=socials-item><a href=https://github.com/kiwi4814 target=_blank rel="external noopener" title=GitHub><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></li><li class=socials-item><a href=https://t.me/kiwi4814 target=_blank rel="external noopener" title=Telegram><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon social-icon"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg></a></li></ul></div></footer></div><script>"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js")})</script><script src=https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js></script><script>let imgNodes=document.querySelectorAll("div.post-body img");imgNodes=Array.from(imgNodes).filter(e=>e.parentNode.tagName!=="A"),mediumZoom(imgNodes,{background:"hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)"})</script><script src=https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js type=module defer></script><script async src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></body></html>